webpackJsonp([8],{539:function(t,i,e){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(i,"__esModule",{value:!0});var r=e(66),s=o(r),n=e(79),a=e(589),l=o(a),c=/^1[35789]\d{9}$/,u=/[\d]{6}/;i.default=e(610)({name:"login",data:function(){return{classes:l.default,limit:0,loginMobile:null,verificationCode:null,mobileError:!1,codeError:!1,submitClicked:!1}},created:function(){this.loginMobile=this.mobile},computed:(0,s.default)({},(0,n.mapGetters)(["mobile"])),methods:(0,s.default)({},(0,n.mapActions)(["setEnv","resetRole"]),{clearMobile:function(){this.loginMobile=null,this.$refs.mobile.focus()},handleInput:function(t,i){var e=i.target.value,o=this.submitClicked,r=void 0;switch(t){case"mobile":r=this.loginMobile=e.substr(0,11),this.mobileError=o&&!c.test(r);break;case"verificationCode":r=this.verificationCode=e.substr(0,6),this.codeError=o&&!u.test(r)}return r},getVerificationCode:function(){var t=this;if(!this.limit){var i=this.loginMobile;return c.test(i)?void this.$http.post("/getVerificationCode",{mobile:i}).then(function(i){var e=i.data;t.limit=e;var o=setInterval(function(){--t.limit||clearInterval(o)},1e3)}):this.mobileError=!0}},submit:function(){var t=this;this.submitClicked=!0;var i=this.loginMobile,e=this.mobileError=!c.test(i),o=this.verificationCode,r=this.codeError=!u.test(o);e||r||this.$http.post("/verifyCode",{verificationCode:o,mobile:i}).then(function(e){var o=e.data,r=o.error;return r?t.$util.alert(r):(t.setEnv({mobile:i,authorized:!0}),t.resetRole(o),void t.$router.replace(t.$route.query.from||"/"))})}})}),t.exports=i.default},575:function(t,i,e){i=t.exports=e(98)(),i.push([t.i,".BwvNQVn5Vsg8-OfKM8KIZ{width:5.9375rem;height:5.9375rem;margin-top:2.5rem;margin-bottom:2.5rem;position:relative;background-color:#e5e5e5}.BwvNQVn5Vsg8-OfKM8KIZ>img{width:5.625rem;height:5.625rem;position:absolute;left:50%;top:50%;-webkit-transform:translate3d(-50%,-50%,0);transform:translate3d(-50%,-50%,0)}._2He4a63EnkWhjYT1c6itEo{margin-bottom:1.5625rem}._2He4a63EnkWhjYT1c6itEo .form-control-static{padding-left:3.125rem;padding-bottom:0}",""]),i.locals={yoga:"BwvNQVn5Vsg8-OfKM8KIZ",yoga:"BwvNQVn5Vsg8-OfKM8KIZ","form-group":"_2He4a63EnkWhjYT1c6itEo",formGroup:"_2He4a63EnkWhjYT1c6itEo"}},589:function(t,i,e){var o=e(575);"string"==typeof o&&(o=[[t.i,o,""]]);e(99)(o,{});o.locals&&(t.exports=o.locals)},597:function(t,i,e){t.exports=e.p+"yoga.b124d4aa1794ed4ac0ec0be1879afdaa.jpg"},610:function(t,i,e){var o=function(){var t=this,i=(t.$createElement,t._c);return i("div",{staticClass:"container"},[i("div",{staticClass:"center-block img-circle",class:t.classes.yoga},[i("img",{staticClass:"img-circle",attrs:{src:e(597),alt:"瑜伽"}})]),i("div",{staticClass:"row"},[i("div",{staticClass:"col-xs-12 col-sm-6 col-sm-push-3 col-lg-4 col-lg-push-4"},[i("form",{attrs:{action:"javascript:;"},on:{submit:function(i){i.preventDefault(),t.submit(i)}}},[i("div",{class:[t.classes.formGroup,this.mobileError&&"has-error"]},[i("div",{staticClass:"input-group"},[t._m(0),i("input",{directives:[{name:"model",rawName:"v-model",value:t.loginMobile,expression:"loginMobile"}],ref:"mobile",staticClass:"form-control",attrs:{type:"number",placeholder:"请输入手机号"},domProps:{value:t._s(t.loginMobile)},on:{input:[function(i){i.target.composing||(t.loginMobile=t._n(i.target.value))},function(i){t.handleInput("mobile",i)}],blur:function(i){t.$forceUpdate()}}}),t.loginMobile?i("span",{staticClass:"input-group-addon",on:{click:t.clearMobile}},[i("span",{staticClass:"glyphicon glyphicon-remove-sign"})]):t._e()]),t.mobileError?i("p",{staticClass:"form-control-static"},[t._v("请输入正确的手机号码")]):t._e()]),i("div",{class:[t.classes.formGroup,this.codeError&&"has-error"]},[i("div",{staticClass:"input-group"},[t._m(1),i("input",{directives:[{name:"model",rawName:"v-model",value:t.verificationCode,expression:"verificationCode"}],staticClass:"form-control",attrs:{type:"number",placeholder:"请输入验证码"},domProps:{value:t._s(t.verificationCode)},on:{input:[function(i){i.target.composing||(t.verificationCode=t._n(i.target.value))},function(i){t.handleInput("verificationCode",i)}],blur:function(i){t.$forceUpdate()}}}),i("span",{staticClass:"input-group-addon theme-color",on:{click:t.getVerificationCode}},[t._v(t._s(this.limit?this.limit+"s":"获取验证码"))])]),t.codeError?i("p",{staticClass:"form-control-static"},[t._v("请输入正确的验证码")]):t._e()]),i("button",{staticClass:"btn btn-theme-primary btn-block btn-hg",attrs:{type:"submit"}},[t._v("登 录")])])])])])},r=[function(){var t=this,i=(t.$createElement,t._c);return i("span",{staticClass:"input-group-addon"},[i("span",{staticClass:"glyphicon glyphicon-phone"})])},function(){var t=this,i=(t.$createElement,t._c);return i("span",{staticClass:"input-group-addon"},[i("span",{staticClass:"glyphicon glyphicon-lock"})])}];t.exports=function(t){return t.render=o,t.staticRenderFns=r,t}}});