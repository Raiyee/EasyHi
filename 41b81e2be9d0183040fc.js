webpackJsonp([36],{1072:function(e,r,t){var i=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{class:e.classes.content},[t("div",{staticClass:"panel panel-theme"},[e._m(0),t("div",{staticClass:"panel-body"},[e.inviterReward.length?t("ol",{staticClass:"list-unstyled",class:e.classes.inviterRewards},e._l(e.inviterReward,function(r,i){return t("li",{key:r.rewardId},[t("inviter-reward",{ref:"inviterReward",refInFor:!0,attrs:{reward:r}}),t("span",{staticClass:"iconfont icon-remove",on:{click:function(r){e.removeInviterReward(i)}}})],1)})):e._e(),t("span",{staticClass:"theme-color",class:e.classes.addReward,on:{click:e.addInviterReward}},[t("span",{staticClass:"iconfont icon-jiahao"}),e._v("添加奖励阶梯")]),e._m(1)])]),t("div",{staticClass:"panel panel-theme"},[e._m(2),t("div",{staticClass:"panel-body"},[e.isEnterprise?[e.inviteeRewardVoucher?t("div",{class:e.classes.inviteeReward},[t("div",{staticClass:"header clearfix"},[e._v("体验券"),t("button",{staticClass:"btn btn-theme-default pull-right",on:{click:e.setInviteeReward}},[e._v("修改")])]),t("div",{staticClass:"body"},[t("div",{staticClass:"clearfix"},[e._v(e._s(e.inviteeRewardVoucher.voucherName)),t("div",{staticClass:"pull-right"},[e._v("可上课"),t("span",{staticClass:"theme-color primary-size"},[e._v(e._s(e.inviteeRewardVoucher.voucherTimes))]),e._v("次")])]),e._v(e._s(e.inviteeRewardVoucher.voucherDescription)),t("br"),e._v("有效期: "+e._s(e.inviteeRewardVoucher.voucherExpiredType?e.$util.combineDuration(e.inviteeRewardVoucher.voucherExpiredRange):e.inviteeRewardVoucher.voucherExpiredLimit+"天"))]),t("span",{staticClass:"iconfont icon-remove",on:{click:e.removeInviteeReward}})]):t("span",{staticClass:"theme-color",class:e.classes.addReward,on:{click:e.setInviteeReward}},[t("span",{staticClass:"iconfont icon-jiahao"}),e._v("添加体验券")])]:t("div",{class:e.classes.inviteeReward},[t("div",{staticClass:"clearfix"},[e._v("奖励内容"),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.inviteeRewardContent,expression:"inviteeRewardContent"}],attrs:{placeholder:"如奖励体验券、续卡、瑜伽垫等，建议分点叙述",rows:"3"},domProps:{value:e.inviteeRewardContent},on:{input:function(r){r.target.composing||(e.inviteeRewardContent=r.target.value)}}}),t("div",{staticClass:"remark-color pull-right"},[e._v(e._s(e.inviteeRewardContent.length)+"/100")])])]),e._m(3)],2)]),t("div",{staticClass:"fixed-bottom border-t"},[t("button",{staticClass:"btn btn-theme-default",on:{click:function(r){e.$router.go(-1)}}},[e._v("取消")]),t("button",{staticClass:"btn btn-theme-primary",on:{click:e.publishInvitationReward}},[e._v("发布")])])])},n=[function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"panel-heading"},[t("div",{staticClass:"panel-title"},[e._v("邀请人奖励")])])},function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("span",{staticClass:"remark-color"},[t("span",{staticClass:"iconfont icon-prompt"}),e._v("邀请人需联系场馆兑奖")])},function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"panel-heading"},[t("div",{staticClass:"panel-title"},[e._v("被邀请人奖励")])])},function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("span",{staticClass:"remark-color"},[t("span",{staticClass:"iconfont icon-prompt"}),e._v("体验券将在被邀请人登录成功后自动入账")])}];e.exports=function(e){return e=e||{},e.render=i,e.staticRenderFns=n,e}},1073:function(e,r,t){var i=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{class:e.classes.content},[t("div",{staticClass:"header border-b",class:{error:e.thresholdError}},[e._v("办卡成功好友满多少后可兑奖"),t("div",{staticClass:"input-wrapper"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.rewardThreshold,expression:"rewardThreshold"}],attrs:{type:"tel"},domProps:{value:e.rewardThreshold},on:{focus:function(r){e.$v.rewardThreshold.$reset()},blur:function(r){e.$v.rewardThreshold.$touch()},input:function(r){r.target.composing||(e.rewardThreshold=r.target.value)}}})]),e.thresholdError?t("div",{staticClass:"text-right"},[e._v("人数需为大于0的整数")]):e._e()]),t("div",{staticClass:"body clearfix"},[t("h5",[e._v("奖励内容")]),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.rewardContent,expression:"rewardContent"}],attrs:{placeholder:"如奖励体验券、续卡、瑜伽垫等，建议分点叙述",rows:"2"},domProps:{value:e.rewardContent},on:{input:function(r){r.target.composing||(e.rewardContent=r.target.value)}}}),t("div",{staticClass:"remark-color pull-right"},[e._v(e._s(e.rewardContent.length)+"/100")])])])},n=[];e.exports=function(e){return e=e||{},e.render=i,e.staticRenderFns=n,e}},518:function(e,r,t){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function n(e){return function(){var r=e.apply(this,arguments);return new Promise(function(e,t){function i(n,a){try{var o=r[n](a),s=o.value}catch(e){return void t(e)}if(!o.done)return Promise.resolve(s).then(function(e){i("next",e)},function(e){i("throw",e)});e(s)}return i("next")})}}Object.defineProperty(r,"__esModule",{value:!0});var a=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},o=t(48),s=t(794),d=i(s),c=t(1),l=t(964),u=i(l);r.default=t(1072)({name:"reward-setting",data:function(){var e=this.$route.meta.data,r=e.inviterReward,t=e.inviteeRewardId,i=e.inviteeRewardContent,n=t?{voucherId:t,voucherName:i,voucherDescription:e.inviteeRewardDescription,voucherTimes:e.inviteeRewardTimes,voucherExpiredType:e.inviteeRewardExpiredType,voucherExpiredLimit:e.inviteeRewardExpiredLimit,voucherExpiredRange:e.inviteeRewardExpiredRange}:null;return{classes:u.default,inviterReward:r?r.map(function(e,r){return{rewardId:r,rewardThreshold:e.rewardThreshold,rewardContent:e.rewardContent}}):[],inviteeRewardVoucher:n,inviteeRewardContent:i}},computed:a({},(0,o.mapGetters)(["isEnterprise"])),destroyed:function(){this.$modal.close("voucher-selector",!0)},methods:{isInviterRewardValid:function(){var e=this.$refs.inviterReward;return!e||(e.find(function(e){var r=e.rewardThreshold,t=e.rewardContent;return!+r||!t})?!(0,c.alert)("请填写完已有奖励阶梯再添加"):(0,c.isAllUnique)(e,"rewardThreshold")||!(0,c.alert)("奖励阶梯的人数请勿重复"))},addInviterReward:function(){this.isInviterRewardValid()&&this.inviterReward.push({rewardId:+new Date})},setInviteeReward:function(){var e=this;this.$modal.open({id:"voucher-selector",component:new Promise(function(e){t.e(64).then(function(r){e(t(733))}.bind(null,t)).catch(t.oe)}),options:{show:!0},props:{single:!0,confirm:function(r){var t=this,i=this;return n(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.inviteeRewardVoucher=r,i.$modal.close("voucher-selector",!0);case 2:case"end":return t.stop()}},n,t)}))()}}})},removeInviterReward:function(e){this.inviterReward.splice(e,1)},removeInviteeReward:function(){this.inviteeRewardVoucher=null},publishInvitationReward:function(){var e=this,r=this;return n(regeneratorRuntime.mark(function t(){var i,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r.isInviterRewardValid()){e.next=2;break}return e.abrupt("return");case 2:return i=r.$refs.inviterReward,n=r.inviteeRewardVoucher,n=n||{},e.next=7,r.$http.post("/invite/set-invitation",{inviterReward:i&&i.map(function(e){return{rewardThreshold:e.rewardThreshold,rewardContent:e.rewardContent}}),inviteeRewardContent:r.isEnterprise?n.voucherName:r.inviteeRewardContent,inviteeRewardId:n.voucherId,inviteeRewardDescription:n.voucherDescription,inviteeRewardTimes:n.voucherTimes,inviteeRewardExpiredType:n.voucherExpiredType,inviteeRewardExpiredLimit:n.voucherExpiredLimit,inviteeRewardExpiredRange:n.voucherExpiredRange});case 7:(0,c.toast)({tipText:"发布成功",close:function(){return r.$router.push("/invitation-reward")}});case 8:case"end":return e.stop()}},t,e)}))()}},components:{InviterReward:d.default},validator:{inviteeRewardContent:{maxLength:100}}}),e.exports=r.default},794:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=t(965),n=function(e){return e&&e.__esModule?e:{default:e}}(i);r.default=t(1073)({props:{reward:Object},data:function(){var e=this.reward,r=e.rewardThreshold,t=void 0===r?"":r,i=e.rewardContent,a=void 0===i?"":i;return{classes:n.default,rewardThreshold:t,rewardContent:a}},computed:{thresholdError:function(){return this.$v.rewardThreshold.$dirty&&!this.$v.rewardThreshold.min}},validator:{rewardThreshold:{integer:!0,min:1,maxLength:3},rewardContent:{maxLength:100}}}),e.exports=r.default},834:function(e,r,t){r=e.exports=t(60)(!1),r.push([e.i,'._2nWNHsiBMuTff8jedb6cTu{margin-bottom:4.5rem}._2nWNHsiBMuTff8jedb6cTu .panel-body{text-align:center}._2nWNHsiBMuTff8jedb6cTu .icon-remove{position:absolute;top:0;right:0;color:#b7b7b7;font-size:1.25rem;line-height:1;-webkit-transform:translate3d(25%,-25%,0);transform:translate3d(25%,-25%,0)}._35Q9cQbrWt9STG4Qf3-JgA{display:block;margin-bottom:.9375rem}._35Q9cQbrWt9STG4Qf3-JgA+span>span,._35Q9cQbrWt9STG4Qf3-JgA>span{margin-right:.375rem;-webkit-transform:scale(1.5);-ms-transform:scale(1.5);transform:scale(1.5)}._2iLaudk0j2A1_L6zUMtnZL>li{position:relative}._2id6-bRjKokJXLUYI59_LJ{border:1px solid #e0e0e0;border-radius:1.25rem;padding:.75rem 1.25rem;margin-bottom:.625rem;text-align:left;color:#555}@media (-webkit-min-device-pixel-ratio:2),(min-resolution:2dppx){._2id6-bRjKokJXLUYI59_LJ{position:relative;border:0}._2id6-bRjKokJXLUYI59_LJ:before{content:"";width:200%;height:200%;position:absolute;top:0;left:0;border:1px solid #e0e0e0;-webkit-transform:scale(.5);-ms-transform:scale(.5);transform:scale(.5);-webkit-transform-origin:0 0;-ms-transform-origin:0 0;transform-origin:0 0;padding:1px;box-sizing:border-box;border-radius:2.5rem;pointer-events:none}}._2id6-bRjKokJXLUYI59_LJ .header{line-height:1.5rem;margin-bottom:.3125rem}._2id6-bRjKokJXLUYI59_LJ .header .btn{padding:1px .625rem;-webkit-transform:scale(.928571428571429);-ms-transform:scale(.928571428571429);transform:scale(.928571428571429)}._2id6-bRjKokJXLUYI59_LJ .body{color:gray}._2id6-bRjKokJXLUYI59_LJ textarea{display:block;width:100%;resize:none;border:0;outline:0;padding:0}',""]),r.locals={content:"_2nWNHsiBMuTff8jedb6cTu","add-reward":"_35Q9cQbrWt9STG4Qf3-JgA",addReward:"_35Q9cQbrWt9STG4Qf3-JgA","inviter-rewards":"_2iLaudk0j2A1_L6zUMtnZL",inviterRewards:"_2iLaudk0j2A1_L6zUMtnZL","invitee-reward":"_2id6-bRjKokJXLUYI59_LJ",inviteeReward:"_2id6-bRjKokJXLUYI59_LJ"}},835:function(e,r,t){r=e.exports=t(60)(!1),r.push([e.i,'._2aax7LeHXPXVyssMzNI-Dr{border:1px solid #e0e0e0;border-radius:1.25rem;padding:0 1.25rem .75rem;margin-bottom:.625rem;text-align:left;color:#555}@media (-webkit-min-device-pixel-ratio:2),(min-resolution:2dppx){._2aax7LeHXPXVyssMzNI-Dr{position:relative;border:0}._2aax7LeHXPXVyssMzNI-Dr:before{content:"";width:200%;height:200%;position:absolute;top:0;left:0;border:1px solid #e0e0e0;-webkit-transform:scale(.5);-ms-transform:scale(.5);transform:scale(.5);-webkit-transform-origin:0 0;-ms-transform-origin:0 0;transform-origin:0 0;padding:1px;box-sizing:border-box;border-radius:2.5rem;pointer-events:none}}._2aax7LeHXPXVyssMzNI-Dr .header{padding:.75rem 0;line-height:1.375rem}._2aax7LeHXPXVyssMzNI-Dr .header.error .input-wrapper{border:1px solid #fb351b;border-radius:.6875rem}@media (-webkit-min-device-pixel-ratio:2),(min-resolution:2dppx){._2aax7LeHXPXVyssMzNI-Dr .header.error .input-wrapper{position:relative;border:0}._2aax7LeHXPXVyssMzNI-Dr .header.error .input-wrapper:before{content:"";width:200%;height:200%;position:absolute;top:0;left:0;border:1px solid #fb351b;-webkit-transform:scale(.5);-ms-transform:scale(.5);transform:scale(.5);-webkit-transform-origin:0 0;-ms-transform-origin:0 0;transform-origin:0 0;padding:1px;box-sizing:border-box;border-radius:1.375rem;pointer-events:none}}._2aax7LeHXPXVyssMzNI-Dr .header.error .input-wrapper+div{color:#fb351b;-webkit-transform:scale(.857142857142857);-ms-transform:scale(.857142857142857);transform:scale(.857142857142857);-webkit-transform-origin:right;-ms-transform-origin:right;transform-origin:right}._2aax7LeHXPXVyssMzNI-Dr .header .input-wrapper{border:1px solid #e0e0e0;border-radius:.6875rem;float:right;padding:0 .625rem}@media (-webkit-min-device-pixel-ratio:2),(min-resolution:2dppx){._2aax7LeHXPXVyssMzNI-Dr .header .input-wrapper{position:relative;border:0}._2aax7LeHXPXVyssMzNI-Dr .header .input-wrapper:before{content:"";width:200%;height:200%;position:absolute;top:0;left:0;border:1px solid #e0e0e0;-webkit-transform:scale(.5);-ms-transform:scale(.5);transform:scale(.5);-webkit-transform-origin:0 0;-ms-transform-origin:0 0;transform-origin:0 0;padding:1px;box-sizing:border-box;border-radius:1.375rem;pointer-events:none}}._2aax7LeHXPXVyssMzNI-Dr .header .input-wrapper:after{content:"\\4EBA";-webkit-transform:scale(.857142857142857);-ms-transform:scale(.857142857142857);transform:scale(.857142857142857);display:inline-block}._2aax7LeHXPXVyssMzNI-Dr .header input{display:inline-block;width:2.5rem;line-height:1;border:0;padding:0;outline:0;text-align:center}._2aax7LeHXPXVyssMzNI-Dr .body h5{font-weight:400}._2aax7LeHXPXVyssMzNI-Dr .body textarea{display:block;width:100%;resize:none;border:0;outline:0;padding:0}',""]),r.locals={content:"_2aax7LeHXPXVyssMzNI-Dr"}},964:function(e,r,t){var i=t(834);"string"==typeof i&&(i=[[e.i,i,""]]);var n={};n.transform=void 0;t(152)(i,n);i.locals&&(e.exports=i.locals)},965:function(e,r,t){var i=t(835);"string"==typeof i&&(i=[[e.i,i,""]]);var n={};n.transform=void 0;t(152)(i,n);i.locals&&(e.exports=i.locals)}});