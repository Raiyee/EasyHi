// helper
-posR(type, args)
  $i = 0
  position: unquote(type)
  for $j in (1..4)
    if length(args) > $i
      {args[$i]}: args[$i + 1] is a 'function' ? 0 : args[$i + 1]
    $i += 1

fixedR()
  -posR('fixed', arguments)

absoluteR()
  -posR('absolute', arguments)

relativeR()
  -posR('relative', arguments)

//
bbColor()
  color arguments[0]
  border-color arguments[1] || arguments[0]
  background-color arguments[2] || arguments[1] || arguments[0]
  outline 0

// @stylint off
bbActive()
  &:hover, &.focus, &:focus
    bbColor arguments
  &.active, &:active
    &, &:hover, &.focus, &:focus
      bbColor arguments
// @stylint on

clearUnit(val)
  return unit(val, '')

middleCenter($position = absolute)
  $position()
  left 50%
  top 50%
  transform translate3d(-50%, -50%, 0)

scaleSize(size = $small-size, baseSize = null, transform = null, origin = null)
  if (baseSize)
    font-size unit(baseSize, 'px')
  transform transform scale(clearUnit(size / (baseSize || $common-size)))
  if (origin)
    transform-origin origin

// 1px fallback
borderLine(direction, borderColor = $border-color)
  return linear-gradient(to direction, transparent 50%, borderColor 50%)

borderRadius(borderColor = $border-color, borderRadius = $border-radius-base, borderBeforeRadius = $border-radius-lg)
  border 1px solid borderColor
  border-radius borderRadius

  @media (min-resolution 2dppx)
    position relative
    border 0

    &:before
      content ""
      width 200%
      height 200%
      position absolute
      top 0
      left 0
      border 1px solid borderColor
      transform scale(.5)
      transform-origin 0 0
      padding 1px
      box-sizing border-box
      border-radius borderBeforeRadius
      pointer-events none

border1px(borderColor = $border-color)
  border 1px solid borderColor

  @media (min-resolution 2dppx)
    relative()
    border 0

    &:after
      absolute(top, left)
      content ""
      width 100%
      height 100%
      background-image borderLine(top, borderColor), borderLine(right, borderColor), borderLine(bottom, borderColor), borderLine(left, borderColor)
      background-size 100% 1px, 1px 100%, 100% 1px, 1px 100%
      background-repeat no-repeat
      background-position top, right, bottom, left
      padding 1px
      box-sizing border-box
      z-index $z-index-border
      pointer-events none

$border1px-tb
  background-repeat repeat-x
  background-size 100% 1px

border1px-t(borderColor = $border-color)
  border-top 1px solid borderColor

  @media (min-resolution 2dppx)
    border 0
    background-position left top
    background-image borderLine(top, borderColor)
    @extend $border1px-tb

border1px-b(borderColor = $border-color)
  border-bottom 1px solid borderColor

  @media (min-resolution 2dppx)
    border 0
    background-position left bottom
    background-image borderLine(bottom, borderColor)
    @extend $border1px-tb

border1px-tb(borderColor = $border-color)
  border-top borderColor 1px solid
  border-bottom borderColor 1px solid
  background-image none

  @media (min-resolution 2dppx)
    border 0
    background-image borderLine(top, borderColor), borderLine(bottom, borderColor)
    background-position top, bottom
    @extend $border1px-tb

$border1px-lr
  background-repeat repeat-y
  background-size 1px 100%

border1px-l(borderColor = $border-color)
  border-left 1px solid borderColor

  @media (min-resolution 2dppx)
    border 0
    background-position left top
    background-image borderLine(left, borderColor)
    @extend $border1px-lr

border1px-r(borderColor = $border-color)
  border-right 1px solid borderColor

  @media (min-resolution 2dppx)
    border 0
    background-position right top
    background-image borderLine(right, borderColor)
    @extend $border1px-lr

close()
  absoluteR(arguments)
  &:before
    content ''
    absolute()
    height 1px
    width 15px
    border-top 3px solid $border-color
    transform rotateZ(45deg)
  &:after
    content ''
    absolute()
    height 1px
    width 15px
    border-top 3px solid $border-color
    transform rotateZ(-45deg)
